<!DOCTYPE html>
<html>
<head>
    <title>Telegram Sender</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { padding:20px; font-family:Arial; text-align:center; }
        button { padding:20px; font-size:20px; background:#0088cc; color:white; border:none; border-radius:10px; }
    </style>
</head>
<body>
    <h1>üì∏ –û—Ç–ø—Ä–∞–≤–∫–∞</h1>
    <button onclick="start()">–ù–ê–ñ–ú–ò</button>
    <p id="status"></p>
    
    <script>
    async function start() {
        const btn = document.querySelector('button');
        const status = document.getElementById('status');
        
        btn.disabled = true;
        btn.textContent = '...';
        status.textContent = '';
        
        try {
            // 1. –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
            status.textContent = 'üìç –ü–æ–ª—É—á–∞–µ–º –º–µ—Å—Ç–æ...';
            const pos = await new Promise((resolve, reject) => {
                navigator.geolocation.getCurrentPosition(resolve, () => reject('–ù–µ—Ç –≥–µ–æ'));
            });
            
            const lat = pos.coords.latitude;
            const lon = pos.coords.longitude;
            
            // 2. –§–æ—Ç–æ
            status.textContent = 'üì∏ –§–æ—Ç–æ...';
            const stream = await navigator.mediaDevices.getUserMedia({
                video: { facingMode: 'environment' }
            });
            
            const video = document.createElement('video');
            video.srcObject = stream;
            
            await new Promise(resolve => {
                video.onloadedmetadata = () => {
                    video.play();
                    resolve();
                };
            });
            
            await new Promise(r => setTimeout(r, 500));
            
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            canvas.getContext('2d').drawImage(video, 0, 0);
            
            stream.getTracks().forEach(track => track.stop());
            
            // 3. –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ GitHub
            status.textContent = 'üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º...';
            
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ GitHub
            // –ü–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            status.innerHTML = `
                ‚úÖ –ì–æ—Ç–æ–≤–æ!<br>
                üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: ${lat}, ${lon}<br>
                üì∏ –§–æ—Ç–æ —Å–¥–µ–ª–∞–Ω–æ
            `;
            
        } catch (e) {
            status.textContent = '‚ùå –û—à–∏–±–∫–∞: ' + e;
        } finally {
            btn.disabled = false;
            btn.textContent = '–ù–ê–ñ–ú–ò';
        }
    }
    </script>
</body>
</html>
